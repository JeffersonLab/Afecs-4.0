
<!--
  ~   Copyright (c) 2017.  Jefferson Lab (JLab). All rights reserved. Permission
  ~   to use, copy, modify, and distribute  this software and its documentation for
  ~   governmental use, educational, research, and not-for-profit purposes, without
  ~   fee and without a signed licensing agreement.
  ~
  ~   IN NO EVENT SHALL JLAB BE LIABLE TO ANY PARTY FOR DIRECT, INDIRECT, SPECIAL
  ~   INCIDENTAL, OR CONSEQUENTIAL DAMAGES, INCLUDING LOST PROFITS, ARISING
  ~   OUT OF THE USE OF THIS SOFTWARE AND ITS DOCUMENTATION, EVEN IF JLAB HAS
  ~   BEEN ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
  ~
  ~   JLAB SPECIFICALLY DISCLAIMS ANY WARRANTIES, INCLUDING, BUT NOT LIMITED TO,
  ~   THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR
  ~   PURPOSE. THE CLARA SOFTWARE AND ACCOMPANYING DOCUMENTATION, IF ANY,
  ~   PROVIDED HEREUNDER IS PROVIDED "AS IS". JLAB HAS NO OBLIGATION TO PROVIDE
  ~   MAINTENANCE, SUPPORT, UPDATES, ENHANCEMENTS, OR MODIFICATIONS.
  ~
  ~   This software was developed under the United States Government license.
  ~   For more information contact author at gurjyan@jlab.org
  ~   Department of Experimental Nuclear Physics, Jefferson Lab.
  -->

<html>
<head>
    <title></title>
</head>
<body>

<h2 xmlns="http://www.w3.org/1999/xhtml" id="sites-page-title-header" style="" align="left">
<span id="sites-page-title" dir="ltr">Add a process</span>
</h2>

<div id="sites-canvas-main" class="sites-canvas-main">
<div id="sites-canvas-main-content">
<table xmlns="http://www.w3.org/1999/xhtml" class="sites-layout-name-one-column sites-layout-hbox" cellspacing="0"><tbody><tr><td class="sites-layout-tile sites-tile-name-content-1"><div dir="ltr">Afecs allows to attach a process to a control system component. These processes can be scheduled to be executed before or after desired state of the control system state machine. <br>Here is an example of <i>U0</i> component description, where we define a process called <i>user_predownloaded</i> :<br><br><font style="color: rgb(102, 0, 0); font-family: times new roman,serif;" size="2">1&nbsp; &lt;rdf:Description rdf:about="http://COOLHOME/Component/USER/U0#U0"&gt;<br>2 <br>3&nbsp;&nbsp;&nbsp; &lt;cool:hasName&gt;U0&lt;/cool:hasName&gt;<br>4&nbsp; &nbsp; &lt;cool:hasType&gt;USER&lt;/cool:hasType&gt;<br>5&nbsp; &nbsp; &lt;cool:hasPriority&gt;88&lt;/cool:hasPriority&gt;<br>6&nbsp; &nbsp; &lt;cool:isCodaComponent&gt;true&lt;/cool:isCodaComponent&gt;<br>7<br>8&nbsp; &nbsp; &lt;cool:include rdf:resource="http://COOLHOME/Process/USER/User_processes.rdf"/&gt;<br>9&nbsp; &nbsp; &lt;cool:hasProcess rdf:resource="http://COOLHOME/Process/USER/user_predownloaded#User_predownloaded"/&gt;<br>10<br>11 &lt;/rdf:Description&gt;<br></font><br>Line 8 and 9 defines a process, which is described in the <i>$COOL_HOME/Process/USER/User_processes.rdf</i> file.<br>This file contains a description of the <i>user_predownloaded</i> process as:<br><br><span style="font-family: times new roman,serif; color: rgb(102, 0, 0);">1&nbsp; &lt;rdf:Description rdf:about="http://COOLHOME/Process/USER/user_predownloaded#User_predownloaded"&gt;</span><br style="font-family: times new roman,serif; color: rgb(102, 0, 0);"><span style="font-family: times new roman,serif; color: rgb(102, 0, 0);">2 &nbsp; &nbsp; &lt;cool:hasName&gt;User_predownloaded&lt;/cool:hasName&gt;</span><br style="font-family: times new roman,serif; color: rgb(102, 0, 0);"><span style="font-family: times new roman,serif; color: rgb(102, 0, 0);">3 &nbsp; &nbsp; &lt;cool:before&gt;downloaded&lt;/cool:before&gt;</span><br style="font-family: times new roman,serif; color: rgb(102, 0, 0);"><span style="font-family: times new roman,serif; color: rgb(102, 0, 0);">4 &nbsp; &nbsp; &lt;cool:runs rdf:resource ="#User_predownloaded_script"/&gt;</span><br style="font-family: times new roman,serif; color: rgb(102, 0, 0);"><span style="font-family: times new roman,serif; color: rgb(102, 0, 0);">5&nbsp; &lt;/rdf:Description&gt;</span><br style="font-family: times new roman,serif; color: rgb(102, 0, 0);"><span style="font-family: times new roman,serif; color: rgb(102, 0, 0);">6</span><br style="font-family: times new roman,serif; color: rgb(102, 0, 0);"><span style="font-family: times new roman,serif; color: rgb(102, 0, 0);">7&nbsp; &lt;cool:Script rdf:ID="User_predownloaded_script"&gt;</span><br style="font-family: times new roman,serif; color: rgb(102, 0, 0);"><span style="font-family: times new roman,serif; color: rgb(102, 0, 0);">8 &nbsp; &nbsp; &lt;cool:hasName&gt;User_predownloaded_script&lt;/cool:hasName&gt;</span><br style="font-family: times new roman,serif; color: rgb(102, 0, 0);"><span style="font-family: times new roman,serif; color: rgb(102, 0, 0);">9 &nbsp; &nbsp; &lt;cool:hasCommandString&gt;emacs&lt;/cool:hasCommandString&gt;</span><br style="font-family: times new roman,serif; color: rgb(102, 0, 0);"><span style="font-family: times new roman,serif; color: rgb(102, 0, 0);">10 &nbsp; &lt;cool:isSynchronous&gt;true&lt;/cool:isSynchronous&gt;</span><br style="font-family: times new roman,serif; color: rgb(102, 0, 0);"><span style="font-family: times new roman,serif; color: rgb(102, 0, 0);">11 &nbsp; &lt;!--&lt;cool:hasTimeout&gt;7&lt;/cool:hasTimeout&gt;--&gt;</span><br style="font-family: times new roman,serif; color: rgb(102, 0, 0);"><span style="font-family: times new roman,serif; color: rgb(102, 0, 0);">12 &lt;/cool:Script&gt;</span><br style="font-family: times new roman,serif; color: rgb(102, 0, 0);"><br>If you can see line 3 tells us that this process is going to be executed before <i>downloaded</i> state of the CODA FSM. According to line 4 this process will run a script defined in the lines 7-12. Line 9 defines a command string to be executed in the component representing agent's shell, and line 10 declares this shell execution as synchronous. This means that before <i>U0</i> component transitions to <i>downloaded</i> state an emacs editor will pop up and control system will wait until emacs will be closed. <br></div></td></tr></tbody></table>

</div>
</div>    
</body>
</html>